!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vue"),require("@aspnet/signalr")):"function"==typeof define&&define.amd?define(["vue","@aspnet/signalr"],e):"object"==typeof exports?exports.dotnetify=e(require("vue"),require("@aspnet/signalr")):t.dotnetify=e(t.Vue,t.signalR)}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=23)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var r=r||t||{},o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"trim",value:function(t){if("string"!=typeof t)return"";for(;t.indexOf("/",t.length-1)>=0;)t=t.substr(0,t.length-1);for(;0==t.indexOf("/");)t=t.substr(1,t.length-1);return t}},{key:"equal",value:function(t,e){return null!=t&&null!=e&&t.toLowerCase()==e.toLowerCase()}},{key:"startsWith",value:function(t,e){return t.toLowerCase().slice(0,e.length)==e.toLowerCase()}},{key:"endsWith",value:function(t,e){return""==e||t.toLowerCase().slice(-e.length)==e.toLowerCase()}},{key:"dispatchEvent",value:function(t){if("function"==typeof Event)r.dispatchEvent(new Event(t));else{var e=document.createEvent("CustomEvent");e.initEvent(t,!0,!0),r.dispatchEvent(e)}}},{key:"grep",value:function(t,e){return Array.isArray(t)?t.filter(e):[]}}]),t}();e.createEventEmitter=function(t){var e=[];return{emit:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=!1;return e.forEach(function(t){o=t.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n))||o}),o},subscribe:function(t){return!e.includes(t)&&e.push(t),function(){return e=e.filter(function(e){return e!==t})}}}},e.fetch=function(t,e,n,o){return new Promise(function(i,u){var a=new r.XMLHttpRequest;a.open(t,e,!0),"function"==typeof o&&o(a),a.onload=function(){if(a.status>=200&&a.status<400){var t=a.responseText;i(t)}else u(a)},a.onerror=function(){u(a)},a.send(n)})};e.default=new o}).call(this,n(0))},function(t,e,n){"use strict";(function(t,r){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=i||t||{},u=n(19),a=u.extend(function(t){return t===i||t.document?{0:t,on:function(t,e){i.addEventListener(t,e)},bind:function(t,e){i.addEventListener(t,e,!1)},unbind:function(t,e){i.removeEventListener(t,e,!1)}}:("string"!=typeof t&&(t.events=t.events||{}),{0:t,bind:function(e,n){var r=t.events[e]||[];r.push(n),t.events[e]=r},unbind:function(e,n){var r=t.events[e]||[];if(n){var o=r.indexOf(n);-1!==o&&r.splice(o,1)}else r=[];t.events[e]=r},triggerHandler:function(e,n){var r=t.events[e]||[],o=[{type:e}];Array.isArray(n)?n.forEach(function(t){o.push(t)}):n&&o.push(n),r.forEach(function(t){t.apply(this,o)})},load:function(e,n,r){var o=new i.XMLHttpRequest;return o.open("GET",e,!0),o.onload=function(){if(o.status>=200&&o.status<400){var e=o.responseText;document.querySelector(t).innerHTML=e,r.call(document.querySelector(t))}},o.send(),{abort:function(t){return o.abort(t)}}}})},u,{support:{cors:!0},trim:function(t){return"string"==typeof t?t.trim():t},inArray:function(t,e){return-1!==t.indexOf(e)},makeArray:function(t){return[].slice.call(t,0)},merge:function(t,e){return Array.prototype.push.apply(t,e),t},isEmptyObject:function(t){return!t||0===Object.keys(t).length},ajax:function(t){var e=new i.XMLHttpRequest;return e.onreadystatechange=function(){if(4===e.readyState)if(200!==e.status||e._hasError)t.error&&t.error(e);else try{t.success&&t.success(JSON.parse(e.responseText))}catch(n){t.success&&t.success(e.responseText)}},e.open(t.type,t.url),e.setRequestHeader("content-type",t.contentType),e.send(t.data.data&&"data="+t.data.data),{abort:function(t){return e.abort(t)}}},getScript:function(t,e){var n=!1,r=u.Deferred(),o=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.src=t,i.onload=i.onreadystatechange=function(){n||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(n=!0,i.onload=i.onreadystatechange=null,o.removeChild(i),"function"==typeof e&&e(),r.resolve())},o.appendChild(i),r}});void 0!==i&&(i.jQuery=i.jQuery||a),"object"===o(e)&&"object"===o(r)&&(r.exports=a)}).call(this,n(0),n(20)(t))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=u(n(22)),i=u(n(12));function u(t){return t&&t.__esModule?t:{default:t}}var a=a||t||{},s=a.dotnetify||o.default;s.vue={version:"2.0.0",viewModels:{},plugins:{},controller:s,_hubs:[],init:function(t){var e=s.vue,n=function(){t.isHubStarted||Object.keys(e.viewModels).filter(function(n){return e.viewModels[n].$hub===t}).forEach(function(t){return e.viewModels[t].$requested=!1}),s.startHub(t)};e._hubs.some(function(e){return e===t})||(t.responseEvent.subscribe(function(t,n){return e._responseVM(t,n)}),t.connectedEvent.subscribe(function(){return Object.keys(e.viewModels).filter(function(n){return e.viewModels[n].$hub===t&&!e.viewModels[n].$requested}).forEach(function(t){return e.viewModels[t].$request()})}),t.reconnectedEvent.subscribe(n),e._hubs.push(t)),n()},connect:function(t,e,n){if(arguments.length<2)throw new Error("[dotNetify] Missing arguments. Usage: connect(vmId, component) ");var o=s.vue;if(o.viewModels.hasOwnProperty(t))return console.error("Component is attempting to connect to an already active '"+t+"'.  If it's from a dismounted component, you must call vm.$destroy in destroyed()."),o.viewModels[t].$destroy(),setTimeout(function(){return o.connect(t,e,n)});var u={get props(){return e.$props},get state(){var n=o.viewModels[t];return n&&n.$useState?r({},e.$data,e.state):e.$data},setState:function(n){Object.keys(n).forEach(function(r){var i=n[r],u=o.viewModels[t];u&&u.$useState?e.state.hasOwnProperty(r)?e.state[r]=i:i&&e.$set(e.state,r,i):e.hasOwnProperty(r)?e[r]=i:i&&console.error("'"+r+"' is received, but the Vue instance doesn't declare the property.")})}},a=s.selectHub({vmId:t,options:n,hub:null});if(o.viewModels[t]=new i.default(a.vmId,u,a.options,o,a.hub),a.hub&&o.init(a.hub),n){var c=o.viewModels[t];n.useState&&(e.hasOwnProperty("state")?c.$useState=!0:console.error("Option 'useState' requires the 'state' data property on the Vue instance.")),Array.isArray(n.watch)&&o._addWatchers(n.watch,c,e)}return o.viewModels[t]},component:function(t,e,n){var o={created:function(){this.vm=s.vue.connect(e,this,r({},n,{useState:!0}))},destroyed:function(){this.vm.$destroy()},data:function(){return{state:{}}}};return"string"==typeof t?r({name:t},o):r({},o,t)},getViewModels:function(){var t=s.vue;return Object.keys(t.viewModels).map(function(e){return t.viewModels[e]})},_addWatchers:function(t,e,n){var r=function(t){return function(n){!1!==e.$serverUpdate&&e.$dispatch(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,n))}.bind(e)};t.forEach(function(t){return n.$watch(e.$useState?"state."+t:t,r(t))})},_responseVM:function(t,e){var n=s.vue;if(n.viewModels.hasOwnProperty(t)){var r=n.viewModels[t];return s.checkServerSideException(t,e,r.$exceptionHandler),r.$serverUpdate=!1,r.$update(e),setTimeout(function(){return r.$serverUpdate=!0}),!0}return!1}},s.addVMAccessor(s.vue.getViewModels),e.default=s}).call(this,n(0))},function(e,n){e.exports=t},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(4));r.default.directive("vmOn",{bind:function(t,e,n){var r=/{(.*):(.*)}/.exec(e.expression);if(null!=r){var o=r[1].trim(),i=r[2].trim(),u=n.context;if(!u.hasOwnProperty(o))throw new Error("v-vmOn property '"+o+"' is not defined");if(!u.hasOwnProperty(i)&&"function"==typeof u[i])throw new Error("v-vmOn method '"+o+"' is not defined or not a function");u.$watch(o,function(){return u[i](t)})}}}),r.default.directive("vmRoute",{bind:function(t,e,n){var r=n.context,o=e.value;t.href=o&&r.vm?r.vm.$route(o):"",t.addEventListener("click",function(t){t.preventDefault(),r.vm.$handleRoute(t)})},componentUpdated:function(t,e,n){var r=n.context,o=e.value;o&&r.vm&&(t.href=r.vm.$route(o))}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(3));e.default={name:"Scope",props:{vm:String,tag:String},inject:{scoped:{name:"scoped",default:null}},provide:function(){var t=this;return{scoped:function(e){return t.getScope(e)},connect:function(e,n,o){return e=t.getScope(e),r.default.vue.connect(e,n,o)}}},render:function(t){return t(this.tag||"div",null,this.$slots.default)},methods:{getScope:function(t){var e=this.scoped?this.scoped(this.vm):this.vm;return e?e+"."+t:t}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(1));function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routes=[],this.vm=e,this.router=n,this.debug=e.$dotnetify.controller.debug}return o(t,[{key:"RoutingState",get:function(){throw new Error("Not implemented")}},{key:"VMRoot",get:function(){throw new Error("Not implemented")}},{key:"VMArg",get:function(){throw new Error("Not implemented")}}]),o(t,[{key:"dispatchActiveRoutingState",value:function(t){this.vm.$dispatch({"RoutingState.Active":t});var e=this.vm.State().RoutingState;e=Object.assign(e||{},{Active:t}),this.vm.State({RoutingState:e})}},{key:"handleRoute",value:function(t){var e=this,n=null;if("object"===(void 0===t?"undefined":r(t))?(t.preventDefault(),n=t.currentTarget.pathname):"string"==typeof t&&(n=t),null==n||""==n)throw new Error("$handleRoute requires path argument or event with pathname.");setTimeout(function(){return e.router.pushState({},"",n)})}},{key:"initRoot",value:function(){if(this.hasRoutingState&&null!==this.RoutingState&&null!==this.RoutingState.Root&&this._absRoot!=this.RoutingState.Root){var t=i.default.trim(this.VMRoot);""!=t&&(t="/"+t);var e=i.default.trim(this.RoutingState.Root);this._absRoot=""!=e?t+"/"+e:t,this.RoutingState.Root=this._absRoot}}},{key:"initRouting",value:function(){var t=this,e=this.vm;if(this.hasRoutingState)if(null!==this.RoutingState){var n=this.RoutingState.Templates;if(null!=n&&0!=n.length){this.router.$init||(this.router.init(),this.router.$init=!0),this.initRoot(),n.forEach(function(e){var n=null!=e.UrlPattern?e.UrlPattern:e.Id;n=""!=n?n:"/";var r=t.toUrl(n);t.debug&&console.log("router> map "+r+" to template id="+e.Id),t.router.mapTo(r,function(r){t.router.urlPath="";var o=n;for(var i in r)o=o.replace(":"+i,r[i]);o=o.replace(/\(\/:([^)]+)\)/g,"").replace(/\(|\)/g,""),t.routeTo(o,e)})});var r=this.toUrl(this.RoutingState.Active);""==this.router.urlPath&&(this.router.urlPath=r),this.routeUrl()||this.raiseRoutedEvent(!0)}}else console.error("router> the RoutingState prop of '"+e.$vmId+"' was not initialized.")}},{key:"isActive",value:function(t){return!(null==t||!t.hasOwnProperty("Path"))&&i.default.equal(t.Path,this.RoutingState.Active)}},{key:"loadHtmlView",value:function(t,e,n,r){var o=this.vm;this.unmountView(t),$(t).load(e,null,function(){if(null!=n){var t=n.split(",").map(function(t){return $.getScript(t)});$.when.apply($,t).done(function(){return"function"==typeof callbackFn&&r.call(o)})}else"function"==typeof callbackFn&&r.call(o)})}},{key:"loadHtmlElementView",value:function(t,e,n,r,o){var i=this,u=this.vm,a=function(){i.unmountView(t);for(var n=document.querySelector(t);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(e),"function"==typeof callbackFn&&o.call(u)};if(null==n)a();else{var s=n.split(",").map(function(t){return $.getScript(t)});$.when.apply($,s).done(a)}}},{key:"loadView",value:function(t,e,n,r,o){throw new Error("Not implemented")}},{key:"manualRouteTo",value:function(t,e,n,r){this.vm;var o={Id:"manual",Target:e,ViewUrl:n,JSModuleUrl:r};this.routeTo(t,o,!0)}},{key:"onRouteEnter",value:function(t,e){return!0}},{key:"raiseRoutedEvent",value:function(t){this.vm;""!=this.router.urlPath&&1!=t||(this.debug&&console.log("router> routed"),i.default.dispatchEvent("dotnetify.routed"))}},{key:"route",value:function(t,e){if(null!=t){if(!t.hasOwnProperty("Path")&&!t.hasOwnProperty("TemplateId"))throw new Error("Not a valid route");this.initRoot();var n=t.Path,r=null;if(this.hasRoutingState&&null!=this.RoutingState.Templates&&null!=t.TemplateId){var o=this.RoutingState.Templates.filter(function(e){return e.Id==t.TemplateId});if(o.length>0)r=o[0],"string"==typeof e&&(r.Target=e),null==n&&(n=null!=r.UrlPattern?r.UrlPattern:r.Id,t.Path=n);else if(null==t.RedirectRoot)throw new Error("vmRoute cannot find route template "+t.TemplateId)}if(null!=t.RedirectRoot){var i=t.RedirectRoot;"/"==i.charAt(0)&&(i=i.substr(0,i.length-1));var u=t.RedirectRoot.split("/"),a="",s=this.VMRoot;if(null!=s)for(var c=s.split("/"),l=0;l<c.length&&(""==c[l]||c[l]!=u[0]);l++)a+=c[l]+"/";return a=(a+=i+"/"+n).replace(/\/\/+/g,"/"),this.routes.some(function(t){return t.Path===n})||this.routes.push({Path:n,Url:a}),a}if(null==r)throw new Error("vmRoute cannot find any route template");t.$template=r,this.pathToRoute=this.pathToRoute||{},this.pathToRoute[n]=t;var f=this.toUrl(n);return f=f.length>0?f:"/",this.routes.some(function(t){return t.Path===n})||this.routes.push({Path:n,Url:f}),f}}},{key:"routeTo",value:function(t,e,n,r,o){var a=this,s=this.vm,c=s.$dotnetify.getViewModels();this.debug&&console.log("router> route '"+t+"' to template id="+e.Id);for(var l=0;l<c.length;l++){var f=c[l].$router.VMArg;if(null!=f&&"string"==typeof f["RoutingState.Origin"]&&i.default.equal(f["RoutingState.Origin"],t))return}if(1==n||!s.hasOwnProperty("onRouteEnter")||0!=this.onRouteEnter(t,e)&&0!=s.onRouteEnter(t,e)){if(null!=e.Target)return null==document.getElementById(e.Target)?!0===o?void(this.debug&&console.log("router> target '"+e.Target+"' not found in DOM")):(this.debug&&console.log("router> target '"+e.Target+"' not found in DOM, use redirect instead"),this.router.redirect(this.toUrl(t),[].concat(u(c),u(s.$dotnetify.controller.getViewModels())))):void this.loadView("#"+e.Target,e.ViewUrl,e.JSModuleUrl,{"RoutingState.Origin":t},function(){a.dispatchActiveRoutingState(t),1!=n&&s.hasOwnProperty("onRouteExit")&&s.onRouteExit(t,e),"function"==typeof r&&r.call(s)});console.error("router> the Target for template '"+e.Id+"' was not set.  Use vm.onRouteEnter() to set the target.")}}},{key:"routeToRoute",value:function(t){var e=this,n=this.vm.$route(t);if(null==n||""==n)throw new Error("The route passed to $routeTo is invalid.");setTimeout(function(){return e.router.pushState({},"",n)})}},{key:"routeUrl",value:function(t){var e=this;if(!this.hasRoutingState)return!1;var n=!!t,r=this.RoutingState.Root;if(null==r)return!1;var o=n?t:this.router.urlPath;if(this.debug&&console.log("router> routing "+o),i.default.equal(o,r)||i.default.equal(o,r+"/")||"/"===o){var u=i.default.grep(this.RoutingState.Templates,function(t){return""===t.UrlPattern});return u.length>0&&(this.routeTo("",u[0],null,null,n),this.router.urlPath="",this.raiseRoutedEvent(),!0)}if(r+="/",i.default.startsWith(o,r)){var a=null,s=i.default.grep(this.routes,function(t){return i.default.startsWith(o+"/",t.Url+"/")});if(s.length>0)for(var c=0;c<s.length;c++)(null==a||a.Url.length<s[c].Url.length)&&(a=s[c]);if(null!=a){var l=a.Path,f=this.hasOwnProperty("pathToRoute")&&this.pathToRoute.hasOwnProperty(l)?this.pathToRoute[l].$template:null;if(null!=f)return i.default.equal(this.router.urlPath,this.toUrl(l))&&(this.router.urlPath=""),i.default.equal(this.RoutingState.Active,l)?this.raiseRoutedEvent():this.routeTo(l,f,!1,function(){return e.raiseRoutedEvent()},n),!0}else if(this.router.match(o))return this.router.urlPath="",this.raiseRoutedEvent(),!0}return!1}},{key:"toUrl",value:function(t){var e=i.default.trim(t);return"("!=e.charAt(0)&&""!=e&&(e="/"+e),this.hasRoutingState?this.RoutingState.Root+e:t}},{key:"unmountView",value:function(t){throw new Error("Not implemented")}}]),t}();e.default=a},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=l(n(4)),a=l(n(7)),s=l(n(2)),c=l(n(1));function l(t){return t&&t.__esModule?t:{default:t}}var f=f||t||{},d=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"hasRoutingState",get:function(){var t=this.vm.State();return t&&t.hasOwnProperty("RoutingState")}},{key:"RoutingState",get:function(){return this.vm.State().RoutingState}},{key:"VMRoot",get:function(){return this.vm.Props("vmRoot")}},{key:"VMArg",get:function(){return this.vm.Props("vmArg")}}]),i(e,[{key:"onRouteEnter",value:function(t,e){return e.ViewUrl||(e.ViewUrl=e.Id),!0}},{key:"loadView",value:function(t,e,n,r,o){var i=this.vm,u=void 0;if(this.hasRoutingState){if(null===this.RoutingState)return void console.error("router> the RoutingState prop of '"+i.$vmId+"' was not initialized.");var a=this.VMRoot;u={vmRoot:a=null!=a?"/"+c.default.trim(this.RoutingState.Root)+"/"+c.default.trim(a):this.RoutingState.Root,vmArg:r}}if(e=this.router.overrideUrl(e,t),n=this.router.overrideUrl(n,t),c.default.endsWith(e,"html"))this.loadHtmlView(t,e,n,o);else{var s=e;"string"==typeof e&&f.hasOwnProperty(e)&&(s=Object.assign({},f[e])),s instanceof HTMLElement?this.loadHtmlElementView(t,s,n,u,o):this.loadVueView(t,s,n,u,o)}}},{key:"loadVueView",value:function(t,e,n,i,a){var c=this;return new Promise(function(l,f){var d=c.vm,h=c.vm?c.vm.$vmId:"",p=function(){var n=e;if("object"!==(void 0===e?"undefined":o(e))||"function"!=typeof e.render&&!e.template)return console.error("["+h+"] failed to load view '"+e+"' because it's not a Vue element."),void f();c.unmountView(t);var s="function"==typeof n.data?n.data():n.data||{};if(s.hasOwnProperty("RoutingState")||(s.RoutingState={},n.data=function(){return s}),i)for(var p in n.props=n.props||{},i)n.props.hasOwnProperty(p)||(n.props[p]={type:null});var v=new(u.default.extend(n))({propsData:r({},i)});document.querySelector(t).innerHTML="<div />",v.$mount(t+" > div"),c.mountedComponents[t]=function(){return v.$destroy()},"function"==typeof a&&a.call(d,v),l(v)};if(null==n)p();else{var v=n.split(",").map(function(t){return s.default.getScript(t)});s.default.when.apply(s.default,v).done(p)}})}},{key:"unmountView",value:function(t){this.mountedComponents||(this.mountedComponents={});var e=this.mountedComponents[t];"function"==typeof e&&(e(),delete this.mountedComponents[t])}}]),e}();e.default=d}).call(this,n(0))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=n||t||{},r={version:"0.8.5",map:function(t){return r.routes.defined.hasOwnProperty(t)?r.routes.defined[t]:new r.core.route(t)},root:function(t){r.routes.root=t},rescue:function(t){r.routes.rescue=t},history:{initial:{},pushState:function(t,e,o){r.history.supported?r.dispatch(o)&&history.pushState(t,e,o):r.history.fallback&&(n.location.hash="#"+o)},popState:function(t){var e=!r.history.initial.popped&&location.href==r.history.initial.URL;r.history.initial.popped=!0,e||r.dispatch("/"===document.location.pathname?"":document.location.pathname)},listen:function(t){if(r.history.supported=!(!n.history||!n.history.pushState),r.history.fallback=t,r.history.supported)r.history.initial.popped="state"in n.history,r.history.initial.URL=location.href,n.onpopstate=r.history.popState;else if(r.history.fallback){for(route in r.routes.defined)"#"!=route.charAt(0)&&(r.routes.defined["#"+route]=r.routes.defined[route],r.routes.defined["#"+route].path="#"+route);r.listen()}}},match:function(t,e){var n,o,i,u,a,s,c={},l=null;for(l in r.routes.defined)if(null!==l&&void 0!==l)for(n=(l=r.routes.defined[l]).partition(),u=0;u<n.length;u++){if(a=t,(o=n[u]).search(/:/)>0)for(i=0;i<o.split("/").length;i++)i<a.split("/").length&&":"===o.split("/")[i].charAt(0)&&(c[o.split("/")[i].replace(/:/,"")]=a.split("/")[i],(s=a.split("/"))[i]=o.split("/")[i],a=s.join("/"));if(o===a)return e&&(l.params=c),l}return null},dispatch:function(t){var e,n;if(r.routes.current!==t){if(r.routes.previous=r.routes.current,r.routes.current=t,n=r.match(t,!0),r.routes.previous&&null!==(e=r.match(r.routes.previous))&&null!==e.do_exit&&e.do_exit(),null!==n)return n.run(),!0;null!==r.routes.rescue&&r.routes.rescue()}},listen:function(){var t=function(){r.dispatch(location.hash)};""===location.hash&&null!==r.routes.root&&(location.hash=r.routes.root),"onhashchange"in n&&(!document.documentMode||document.documentMode>=8)?n.onhashchange=t:setInterval(t,50),""!==location.hash&&r.dispatch(location.hash)},core:{route:function(t){this.path=t,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},r.routes.defined[t]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};r.core.route.prototype={to:function(t){return this.action=t,this},enter:function(t){return t instanceof Array?this.do_enter=this.do_enter.concat(t):this.do_enter.push(t),this},exit:function(t){return this.do_exit=t,this},partition:function(){for(var t,e,n=[],r=[],o=/\(([^}]+?)\)/g;t=o.exec(this.path);)n.push(t[1]);for(r.push(this.path.split("(")[0]),e=0;e<n.length;e++)r.push(r[r.length-1]+n[e]);return r},run:function(){var t,e=!1;if(r.routes.defined[this.path].hasOwnProperty("do_enter")&&r.routes.defined[this.path].do_enter.length>0)for(t=0;t<r.routes.defined[this.path].do_enter.length;t++)if(!1===r.routes.defined[this.path].do_enter[t].apply(this,null)){e=!0;break}e||r.routes.defined[this.path].action()}},e.default=r}).call(this,n(0))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(n(9));var i=i||t||{},u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.version="2.0.1",this.urlPath=document.location.pathname,this.debug=e}return r(t,[{key:"init",value:function(){if(void 0===o.default)throw new Error("Pathjs library is required for routing.");o.default.history.listen(!0),o.default.routes.rescue=function(){}}},{key:"mapTo",value:function(t,e){t=t.length>0?t:"/",void 0!==o.default&&o.default.map(t).to(function(){e(this.params)})}},{key:"match",value:function(t){if(void 0!==o.default){var e=o.default.match(t,!0);if(null!=e)return e.run(),!0}return!1}},{key:"overrideUrl",value:function(t){return t}},{key:"pushState",value:function(t,e,n){this.urlPath="",void 0!==o.default&&o.default.history.pushState(t,e,n)}},{key:"redirect",value:function(t,e){this.urlPath=t;for(var n=0;n<e.length;n++){if(e[n].$router.routeUrl(t))return void(this.debug&&console.log("router> redirected"))}i.location.replace(t)}},{key:"$ready",value:function(){this.$router.initRouting()}},{key:"$update",value:function(t){t&&t.RoutingState&&this.$router.initRouting()}}]),t}();e.default=u}).call(this,n(0))},function(t,e,n){"use strict";var r=u(n(3)),o=u(n(10)),i=u(n(8));function u(t){return t&&t.__esModule?t:{default:t}}r.default.vue.router=new o.default(r.default.debug),r.default.vue.router.$inject=function(t){var e=new i.default(t,r.default.vue.router);t.$router=e,t.$route=function(t,n){return e.route(t,n)},t.$handleRoute=function(t){return e.handleRoute(t)},t.$routeTo=function(t){return e.routeToRoute(t)}},r.default.vue.router.$mount=function(t,e,n,r){return i.default.prototype.loadVueView(t,e,null,n,r)},r.default.vue.plugins.router=r.default.vue.router},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var u=function(){function t(e,n,r,o,u){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$vmId=e,this.$component=n,this.$options=r||{},this.$vmArg=r&&r.vmArg,this.$headers=r&&r.headers,this.$exceptionHandler=r&&r.exceptionHandler,this.$requested=!1,this.$loaded=!1,this.$itemKey={},this.$dotnetify=o,this.$hub=u;var s=r&&r.getState,c=r&&r.setState;s="function"==typeof s?s:function(){return n.state},c="function"==typeof c?c:function(t){return n.setState(t)},this.State=function(t){return void 0===t?s():c(t)},this.Props=function(t){return a.$component.props&&a.$component.props[t]};var l=this.Props("vmArg");l&&(this.$vmArg=i.default.extend(this.$vmArg,l)),this.$getPlugins().map(function(t){return"function"==typeof t.$inject?t.$inject(a):null})}return o(t,[{key:"$destroy",value:function(){var t=this;if(this.$getPlugins().map(function(e){return"function"==typeof e.$destroy?e.$destroy.apply(t):null}),this.$hub.isConnected)try{this.$hub.disposeVM(this.$vmId)}catch(t){this.$dotnetify.controller.handleConnectionStateChanged("error",t,this.$hub)}delete this.$dotnetify.viewModels[this.$vmId]}},{key:"$dispatch",value:function(t){if(this.$hub.isConnected){var e=this.$dotnetify.controller;try{this.$hub.updateVM(this.$vmId,t),e.debug&&(console.log("["+this.$vmId+"] sent> "),console.log(t),e.debugFn&&e.debugFn(this.$vmId,"sent",t))}catch(t){e.handleConnectionStateChanged("error",t,this.$hub)}}}},{key:"$dispatchListState",value:function(t){var e=this,n=function(){var n=e.$itemKey[o];return n?(i=t[o])[n]?(Object.keys(i).forEach(function(t){if(t!=n){var r={};r[o+".$"+i[n]+"."+t]=i[t],e.$dispatch(r)}}),void e.$updateList(o,i)):(console.error("["+e.$vmId+"] couldn't dispatch data from '"+o+"' due to missing property '"+n+"'."),console.error(i),{v:void 0}):(console.error("["+e.$vmId+"] missing item key for '"+o+"'; add "+o+"_itemKey property to the view model."),{v:void 0})};for(var o in t){var i,u=n();if("object"===(void 0===u?"undefined":r(u)))return u.v}}},{key:"$getPlugins",value:function(){var t=this;return Object.keys(this.$dotnetify.plugins).map(function(e){return t.$dotnetify.plugins[e]})}},{key:"$preProcess",value:function(t){for(var e in t){if(null==(n=/(.*)_add/.exec(e))){if(null==(n=/(.*)_update/.exec(e))){if(null==(n=/(.*)_remove/.exec(e))){var n;if(null==(n=/(.*)_itemKey/.exec(e)));else{var r={};r[i=n[1]]=t[e],this.$setItemKey(r),delete t[e]}}else{i=n[1];if(Array.isArray(this.State()[i])){var o=this.$itemKey[i];null!=o?this.$removeList(i,function(n){return n[o]==t[e]}):console.error("["+this.$vmId+"] missing item key for '"+i+"'; add "+i+"_itemKey property to the view model.")}else console.error("["+this.$vmId+"] '"+i+"' is not found or not an array.");delete t[e]}}else{var i=n[1];Array.isArray(this.State()[i])?this.$updateList(i,t[e]):console.error("["+this.$vmId+"] '"+i+"' is not found or not an array."),delete t[e]}}else{var i=n[1];Array.isArray(this.State()[i])?this.$addList(i,t[e]):console.error("unable to resolve "+e),delete t[e]}}}},{key:"$request",value:function(){this.$hub.isConnected&&this.$hub.requestVM(this.$vmId,{$vmArg:this.$vmArg,$headers:this.$headers}),this.$requested=!0}},{key:"$update",value:function(t){var e=this.$dotnetify.controller;e.debug&&(console.log("["+this.$vmId+"] received> "),console.log(JSON.parse(t)),e.debugFn&&e.debugFn(this.$vmId,"received",JSON.parse(t)));var n=JSON.parse(t);this.$preProcess(n);var r=this.State();r=i.default.extend({},r,n),this.State(r),this.$loaded?this.$onUpdate(n):this.$onLoad()}},{key:"$onLoad",value:function(){var t=this;this.$getPlugins().map(function(e){return"function"==typeof e.$ready?e.$ready.apply(t):null}),this.$loaded=!0}},{key:"$onUpdate",value:function(t){var e=this;this.$getPlugins().map(function(n){return"function"==typeof n.$update?n.$update.apply(e,[t]):null})}},{key:"$setItemKey",value:function(t){Object.assign(this.$itemKey,t)}},{key:"$addList",value:function(t,e){var n=this.$itemKey[t];if(null!=n){if(!e.hasOwnProperty(n))return void console.error("["+this.$vmId+"] couldn't add item to '"+t+"' due to missing property '"+n+"'.");if(this.State()[t].filter(function(t){return t[n]==e[n]}).length>0)return void console.error("["+this.$vmId+"] couldn't add item to '"+t+"' because the key already exists.")}var r=this.State()[t];r.push(e);var o={};o[t]=r,this.State(o)}},{key:"$removeList",value:function(t,e){var n={};n[t]=this.State()[t].filter(function(t){return!e(t)}),this.State(n)}},{key:"$updateList",value:function(t,e){var n=this.$itemKey[t];if(null!=n){if(!e.hasOwnProperty(n))return void console.error("["+this.$vmId+"] couldn't update item to '"+t+"' due to missing property '"+n+"'.");var r={};r[t]=this.State()[t].map(function(t){return t[n]==e[n]?i.default.extend(t,e):t}),this.State(r)}else console.error("["+this.$vmId+"] missing item key for '"+t+"'; add '"+t+"_itemKey' property to the view model.")}}]),t}();e.default=u}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createWebApiHub=e.dotNetifyHubWebApi=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1);var u=e.dotNetifyHubWebApi=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mode="webapi",this.debug=!1,this.isConnected=!1,this.isHubStarted=!1,this.responseEvent=(0,i.createEventEmitter)(),this.reconnectedEvent=(0,i.createEventEmitter)(),this.connectedEvent=(0,i.createEventEmitter)(),this.connectionFailedEvent=(0,i.createEventEmitter)(),this._vmArgs={},this.baseUrl=e||"",this.onRequest=n}return o(t,[{key:"startHub",value:function(){this.isConnected=!0,this.isHubStarted=!0,this.connectedEvent.emit()}},{key:"requestVM",value:function(t,e){var n=this,r=e||{},o=r.$vmArg?"?vmarg="+JSON.stringify(r.$vmArg):"",u=r.$headers||{};this._vmArgs[t]=r;var a=this.baseUrl+"/api/dotnetify/vm/"+t+o;(0,i.fetch)("GET",a,null,function(t){Object.keys(u).forEach(function(e){return t.setRequestHeader(e,u[e])}),"function"==typeof n.onRequest&&n.onRequest(a,t)}).then(function(e){n.responseEvent.emit(t,e)}).catch(function(e){return console.error("["+t+"] Request failed",e)})}},{key:"updateVM",value:function(t,e){var n=this,o=this._vmArgs[t]||{},u=o.$vmArg?"?vmarg="+JSON.stringify(o.$vmArg):"",a=o.$headers||{},s="object"==(void 0===e?"undefined":r(e))?JSON.stringify(e):e,c=this.baseUrl+"/api/dotnetify/vm/"+t+u;(0,i.fetch)("POST",c,s,function(t){t.setRequestHeader("Content-Type","application/json"),Object.keys(a).forEach(function(e){return t.setRequestHeader(e,a[e])}),"function"==typeof n.onRequest&&n.onRequest(c,t,s)}).then(function(e){n.responseEvent.emit(t,e)}).catch(function(e){return console.error("["+t+"] Update failed",e)})}},{key:"disposeVM",value:function(t){delete this._vmArgs[t]}}],[{key:"create",value:function(e,n){return new t(e,n)}}]),t}(),a=u.create;e.createWebApiHub=a,e.default=u.create()},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.hasLocalVM=e.dotNetifyHubLocal=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1);var u=u||t||{},a=function(t){return t&&t.replace(/\./g,"_")},s=e.dotNetifyHubLocal=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mode="local",this.debug=!1,this.isConnected=!1,this.isHubStarted=!1,this.responseEvent=(0,i.createEventEmitter)(),this.reconnectedEvent=(0,i.createEventEmitter)(),this.connectedEvent=(0,i.createEventEmitter)(),this.connectionFailedEvent=(0,i.createEventEmitter)()}return r(t,[{key:"startHub",value:function(){this.isConnected=!0,this.isHubStarted=!0,this.connectedEvent.emit()}},{key:"requestVM",value:function(t,e){var n=this,r=a(t),i=u[r];"object"===(void 0===i?"undefined":o(i))&&"function"==typeof i.onConnect&&(this.debug&&console.log("["+t+"] *** local mode ***"),i.$pushUpdate=function(e){"object"==(void 0===e?"undefined":o(e))&&(e=JSON.stringify(e)),setTimeout(function(){return n.responseEvent.emit(t,e)})},i.$pushUpdate(i.onConnect(e)||{}))}},{key:"updateVM",value:function(t,e){var n=this,r=a(t),i=u[r];if("object"===(void 0===i?"undefined":o(i))&&"function"==typeof i.onDispatch){var s=i.onDispatch(e);s&&("object"==(void 0===s?"undefined":o(s))&&(s=JSON.stringify(s)),setTimeout(function(){return n.responseEvent.emit(t,s)}))}}},{key:"disposeVM",value:function(t){var e=a(t),n=u[e];"object"===(void 0===n?"undefined":o(n))&&"function"==typeof n.onDestroy&&n.onDestroy(t)}}]),t}();e.default=new s,e.hasLocalVM=function(t){var e=a(t),n=u[e];return"object"==(void 0===n?"undefined":o(n))&&"function"==typeof n.onConnect}}).call(this,n(0))},function(t,n){t.exports=e},function(t,e){var n=t.exports={type:function(t){return null==t?String(t):o[r.call(t)]||"object"},isArray:function(t){return"array"===n.type(t)},isFunction:i,isPlainObject:function(t){if(!t||"object"!==n.type(t))return!1;return!0},each:function(t,e,n){var r,o=0,u=t.length,a=void 0===u||i(t);if(n)if(a){for(r in t)if(!1===e.apply(t[r],n))break}else for(;o<u&&!1!==e.apply(t[o++],n););else if(a){for(r in t)if(!1===e.call(t[r],r,t[r]))break}else for(;o<u&&!1!==e.call(t[o],o,t[o++]););return t},extend:function(){var t,e,r,o,i,u,a=arguments[0]||{},s=1,c=arguments.length,l=!1;"boolean"==typeof a&&(l=a,a=arguments[1]||{},s=2);"object"==typeof a||n.isFunction(a)||(a={});c===s&&(a=this,--s);for(;s<c;s++)if(null!=(t=arguments[s]))for(e in t)r=a[e],o=t[e],a!==o&&(l&&o&&(n.isPlainObject(o)||(i=n.isArray(o)))?(i?(i=!1,u=r&&n.isArray(r)?r:[]):u=r&&n.isPlainObject(r)?r:{},a[e]=n.extend(l,u,o)):void 0!==o&&(a[e]=o));return a},noop:function(){}},r=Object.prototype.toString,o={};function i(t){return"function"===n.type(t)}"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){o["[object "+t+"]"]=t.toLowerCase()})},function(t,e,n){var r=t.exports=n(16),o=/\s+/,i={};r.Callbacks=function(t){var e,n,u,a,s,c,l=[],f=!(t="string"==typeof t?i[t]||function(t){var e=i[t]={};return r.each(t.split(o),function(t,n){e[n]=!0}),e}(t):r.extend({},t)).once&&[],d=function(r){for(e=t.memory&&r,n=!0,c=a||0,a=0,s=l.length,u=!0;l&&c<s;c++)if(!1===l[c].apply(r[0],r[1])&&t.stopOnFalse){e=!1;break}u=!1,l&&(f?f.length&&d(f.shift()):e?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function e(n){r.each(n,function(n,o){var i=r.type(o);"function"===i?t.unique&&h.has(o)||l.push(o):o&&o.length&&"string"!==i&&e(o)})}(arguments),u?s=l.length:e&&(a=n,d(e))}return this},remove:function(){return l&&r.each(arguments,function(t,e){for(var n;(n=r.inArray(e,l,n))>-1;)l.splice(n,1),u&&(n<=s&&s--,n<=c&&c--)}),this},has:function(t){return r.inArray(t,l)>-1},empty:function(){return l=[],this},disable:function(){return l=f=e=void 0,this},disabled:function(){return!l},lock:function(){return f=void 0,e||h.disable(),this},locked:function(){return!f},fireWith:function(t,e){return e=[t,(e=e||[]).slice?e.slice():e],!l||n&&!f||(u?f.push(e):d(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h}},function(t,e,n){
/*!
* jquery-deferred
* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
* MIT Licensed
*/
var r=t.exports=n(17),o=Array.prototype.slice;r.extend({Deferred:function(t){var e=[["resolve","done",r.Callbacks("once memory"),"resolved"],["reject","fail",r.Callbacks("once memory"),"rejected"],["notify","progress",r.Callbacks("memory")]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return r.Deferred(function(n){r.each(e,function(e,o){var u=o[0],a=t[e];i[o[1]](r.isFunction(a)?function(){var t=a.apply(this,arguments);t&&r.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[u+"With"](this===i?n:this,[t])}:n[u])}),t=null}).promise()},promise:function(t){return null!=t?r.extend(t,o):o}},i={};return o.pipe=o.then,r.each(e,function(t,r){var u=r[2],a=r[3];o[r[1]]=u.add,a&&u.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[r[0]]=u.fire,i[r[0]+"With"]=u.fireWith}),o.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,i,u=0,a=o.call(arguments),s=a.length,c=1!==s||t&&r.isFunction(t.promise)?s:0,l=1===c?t:r.Deferred(),f=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?o.call(arguments):i,r===e?l.notifyWith(n,r):--c||l.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);u<s;u++)a[u]&&r.isFunction(a[u].promise)?a[u].promise().done(f(u,i,a)).fail(l.reject).progress(f(u,n,e)):--c;return c||l.resolveWith(i,a),l.promise()}})},function(t,e,n){t.exports=n(18)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.dotnetifyHubFactory=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var u=n(15),a=i.default,s=s||t||{},c=e.dotnetifyHubFactory=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"create",value:function(){var t={version:"2.0.0",type:null,reconnectDelay:[2,5,10],reconnectRetry:null,_startInfo:null,_init:!1,requestVM:function(e,n){return t.server.request_VM(e,n)},updateVM:function(e,n){return t.server.update_VM(e,n)},disposeVM:function(e){return t.server.dispose_VM(e)},responseEvent:(0,o.createEventEmitter)(),reconnectedEvent:(0,o.createEventEmitter)(),connectedEvent:(0,o.createEventEmitter)(),connectionFailedEvent:(0,o.createEventEmitter)(),get isHubStarted(){return!!this._startInfo},startHub:function(t,e,n,r){var o=this,i=function(){"function"==typeof e&&e(),o.connectedEvent.emit()};if(null===this._startInfo||r)try{this._startInfo=this.start(t).done(i).fail(function(t){throw"function"==typeof failHander&&n(),o.connectionFailedEvent.emit(),t})}catch(t){this._startInfo=null}else try{this._startInfo.done(i)}catch(o){return this._startInfo=null,this.startHub(t,e,n,r)}},init:function(e,n,r){t._init||(t._init=!0,(r=r||s.signalR||u)&&r.HubConnection?(t.type="netcore",Object.defineProperty(t,"isConnected",{get:function(){return t._connection&&1===t._connection.connection.connectionState}}),t=a.extend(t,{hubPath:e||"/dotnetify",url:n,_connection:null,_reconnectCount:0,_startDoneHandler:null,_startFailHandler:null,_disconnectedHandler:function(){},_stateChangedHandler:function(t){},_onDisconnected:function(){t._changeState(4),t._disconnectedHandler()},_changeState:function(e){1==e&&(t._reconnectCount=0);t._stateChangedHandler({0:"connecting",1:"connected",2:"reconnecting",4:"disconnected",99:"terminated"}[e])},_startConnection:function(e,n){var o=t.url?t.url+t.hubPath:t.hubPath,i={};Object.keys(e).forEach(function(t){i[t]=e[t]}),i.transport=n.shift(),t._connection=(new r.HubConnectionBuilder).withUrl(o,i).build(),t._connection.on("response_vm",t.client.response_VM),t._connection.onclose(t._onDisconnected);var u=t._connection.start().then(function(){t._changeState(1)}).catch(function(){n.length>0?t._startConnection(e,n):t._onDisconnected()});return"function"==typeof t._startDoneHandler&&u.then(t._startDoneHandler).catch(t._startFailHandler||function(){}),u},start:function(e){t._startDoneHandler=null,t._startFailHandler=null;var n=[0],r={webSockets:0,serverSentEvents:1,longPolling:2};e&&Array.isArray(e.transport)&&(n=e.transport.map(function(t){return r[t]}));var o=t._startConnection(e,n);return{done:function(e){return t._startDoneHandler=e,o.then(e).catch(function(t){throw t}),this},fail:function(e){return t._startFailHandler=e,o.catch(e),this}}},disconnected:function(e){"function"==typeof e&&(t._disconnectedHandler=e)},stateChanged:function(e){"function"==typeof e&&(t._stateChangedHandler=e)},reconnect:function(e){if("function"==typeof e)if(!t.reconnectRetry||t._reconnectCount<t.reconnectRetry){var n=t._reconnectCount<t.reconnectDelay.length?t.reconnectDelay[t._reconnectCount]:t.reconnectDelay[t.reconnectDelay.length-1];t._reconnectCount++,setTimeout(function(){t._changeState(2),e()},1e3*n)}else t._changeState(99)},client:{},server:{dispose_VM:function(e){t._connection.invoke("Dispose_VM",e)},update_VM:function(e,n){t._connection.invoke("Update_VM",e,n)},request_VM:function(e,n){t._connection.invoke("Request_VM",e,n)}}})):(t.type="netfx",s.jQuery&&(a=s.jQuery),function(e,n,r){if("function"!=typeof e.signalR)throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.");var o=e.signalR;function i(t,n){return function(){n.apply(t,e.makeArray(arguments))}}function u(t,n){var r,o,u,a,s;for(r in t)if(t.hasOwnProperty(r)){if(!(o=t[r]).hubName)continue;for(u in s=n?o.on:o.off,o.client)if(o.client.hasOwnProperty(u)){if(a=o.client[u],!e.isFunction(a))continue;s.call(o,u,i(o,a))}}}e.hubConnection.prototype.createHubProxies=function(){var t={};return this.starting(function(){u(t,!0),this._registerSubscribedHubs()}).disconnected(function(){u(t,!1)}),t.dotNetifyHub=this.createHubProxy("dotNetifyHub"),t.dotNetifyHub.client={},t.dotNetifyHub.server={dispose_VM:function(n){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Dispose_VM"],e.makeArray(arguments)))},request_VM:function(n,r){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Request_VM"],e.makeArray(arguments)))},update_VM:function(n,r){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Update_VM"],e.makeArray(arguments)))}},t},o.hub=e.hubConnection(t.hubPath,{useDefaultPath:!1}),e.extend(o,o.hub.createHubProxies())}(a),Object.defineProperty(t,"state",{get:function(){return a.connection.hub.state},set:function(t){a.connection.hub.state=t}}),Object.defineProperty(t,"client",{get:function(){return a.connection.dotNetifyHub.client}}),Object.defineProperty(t,"server",{get:function(){return a.connection.dotNetifyHub.server}}),Object.defineProperty(t,"isConnected",{get:function(){return a.connection.hub.state==a.signalR.connectionState.connected}}),t=a.extend(t,{hubPath:e||"/signalr",url:n,_reconnectCount:0,_stateChangedHandler:function(t){},start:function(e){t.url&&(a.connection.hub.url=t.url);var n=void 0;return(n=e?a.connection.hub.start(e):a.connection.hub.start()).fail(function(t){t.source&&"Error parsing negotiate response."===t.source.message&&console.warn("This client may be attempting to connect to an incompatible SignalR .NET Core server.")}),n},disconnected:function(t){return a.connection.hub.disconnected(t)},stateChanged:function(e){return t._stateChangedHandler=e,a.connection.hub.stateChanged(function(n){1==n&&(t._reconnectCount=0);e({0:"connecting",1:"connected",2:"reconnecting",4:"disconnected"}[n.newState])})},reconnect:function(e){if("function"==typeof e)if(!t.reconnectRetry||t._reconnectCount<t.reconnectRetry){var n=t._reconnectCount<t.reconnectDelay.length?t.reconnectDelay[t._reconnectCount]:t.reconnectDelay[t.reconnectDelay.length-1];t._reconnectCount++,setTimeout(function(){t._stateChangedHandler("reconnecting"),e()},1e3*n)}else t._stateChangedHandler("terminated")}})),t.client.response_VM=function(e,n){Array.isArray(e)&&(n=e[1],e=e[0]),t.responseEvent.emit(e,n)||t.server.dispose_VM(e)},t.disconnected(function(){t._startInfo=null,t.reconnect(function(){t.reconnectedEvent.emit()})}))}};return t}}]),t}();e.default=c.create()}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dotnetifyFactory=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(21),i=l(o),u=n(14),a=l(u),s=n(13),c=l(s);function l(t){return t&&t.__esModule?t:{default:t}}function f(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var d=e.dotnetifyFactory=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"create",value:function(){var t={hub:i.default,hubOptions:{transport:["webSockets","longPolling"]},hubPath:null,debug:!1,debugFn:null,offline:!1,isOffline:!0,offlineTimeout:5e3,offlineCacheFn:null,_vmAccessors:[],connectionStateHandler:null,connectHandler:null,get hubServerUrl(){return this.hub.url},set hubServerUrl(t){this.hub.url=t,this.debug&&console.log("SignalR: connecting to "+this.hubServerUrl),this.hub.isHubStarted&&this.startHub(this.hub,!0)},connect:function(e,n){return t.react.connect(e,{},n)},createHub:function(t,e,n){return this.initHub(o.dotnetifyHubFactory.create(),e,t,n)},createWebApiHub:function(t,e){return(0,s.createWebApiHub)(t,e)},initHub:function(t,e,n,r){var o=this;return t=t||this.hub,e=e||this.hubPath,n=n||this.hubServerUrl,r=r||this.hubLib,t.isHubStarted||(t.init(e,n,r),t.stateChanged(function(e){return o.handleConnectionStateChanged(e,null,t)})),t},selectHub:function(t){(t=t||{}).options=t.options||{};var e="function"==typeof this.connectHandler&&this.connectHandler(t)||{};return e.hub||(e.hub=(0,u.hasLocalVM)(t.vmId)?a.default:t.options.webApi?c.default:this.initHub(),e.hub.debug=this.debug),Object.assign(t,e)},startHub:function(t,e){var n=this;(t=t||this.hub).startHub(this.hubOptions,function(){},function(e){return n.handleConnectionStateChanged("error",e,t)},e)},addVMAccessor:function(t){!this._vmAccessors.includes(t)&&this._vmAccessors.push(t)},checkServerSideException:function(t,e,n){var r=JSON.parse(e);if(r&&r.hasOwnProperty("ExceptionType")&&r.hasOwnProperty("Message")){var o={name:r.ExceptionType,message:r.Message};if("function"==typeof n)return n(o);throw console.error("["+t+"] "+o.name+": "+o.message),o}},getViewModels:function(){return this._vmAccessors.reduce(function(t,e){return[].concat(f(t),f(e()))},[]).filter(function(t,e,n){return n.indexOf(t)===e})},handleConnectionStateChanged:function(t,e,n){this.debug&&console.log("SignalR: "+(e?e.message:t)),"function"==typeof this.connectionStateHandler?this.connectionStateHandler(t,e,n):e&&console.error(e)}};return t}}]),t}();e.default=d.create()},function(t,e,n){"use strict";var r=i(n(3));n(11);var o=i(n(6));function i(t){return t&&t.__esModule?t:{default:t}}n(5),r.default.vue.Scope=o.default,t.exports=Object.assign(r.default,{Scope:o.default})}])});